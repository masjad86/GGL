function initialise() {
    $.getJSON('data/contact.json', function (json) {
        var mapJson = json.map; var lat = parseFloat(mapJson.lat); var lang = parseFloat(mapJson.lang); var myLatlng = new google.maps.LatLng(lat, lang); var mapOptions = { zoom: mapJson.zoom, minZoom: mapJson.minZoom, maxZoom: mapJson.maxZoom, zoomControl: mapJson.zoomControl, zoomControlOptions: mapJson.zoomControlOptions, center: myLatlng, mapTypeId: google.maps.MapTypeId.ROADMAP, scrollwheel: mapJson.scrollwheel, panControl: mapJson.panControl, mapTypeControl: mapJson.mapTypeControl, scaleControl: mapJson.scaleControl, streetViewControl: mapJson.streetViewControl, overviewMapControl: mapJson.overviewMapControl, rotateControl: mapJson.rotateControl }
        var labelText = mapJson.title; var mapDiv = document.getElementById('map'); var map = new google.maps.Map(mapDiv, mapOptions); var image = new google.maps.MarkerImage("data:image/png;base64," + mapJson.markerImage, null, null, null, new google.maps.Size(40, 52)); var marker = new google.maps.Marker({ position: myLatlng, icon: image, map: map, title: labelText }); marker.setAnimation(google.maps.Animation.BOUNCE); var mapContent = getMapContent(mapJson); var infowindow = new google.maps.InfoWindow({ content: mapContent }); google.maps.event.addListener(marker, 'click', function () { infowindow.open(map, marker) }); google.maps.event.addDomListener(window, 'resize', function () { map.setCenter(myLatlng) })
    })
}
function getMapContent(mapJson) { var content = '<div style="width:220px;"><div style="float:left;width: 40px;"><img style="width:36px;height:36px;" src="' + mapJson.icon + '"/></div>'; content += '<div style="float:right;width: 170px;padding:5px 0px 0px 5px;"><div class="heading">' + mapJson.title + '</div></div>'; content += '<div class="content">' + mapJson.address + ', ' + mapJson.district + ', ' + mapJson.state + ' ' + mapJson.pincode + '</div>'; content += '<div class="content"><b>Website</b>: <a href="' + mapJson.website + '">' + mapJson.website + '</a></div>'; content += '</div>'; return content }
google.maps.event.addDomListener(window, 'load', initialise)